cmake_minimum_required(VERSION 2.4)

FIND_PACKAGE(SWIG REQUIRED)
FIND_PACKAGE(ITK REQUIRED)
FIND_PACKAGE(VTK REQUIRED)

INCLUDE( FindPetscNoMPI.cmake )

IF(NOT PETSC_FOUND)
       MESSAGE(FATAL_ERROR
       " Could not find Petsc.")
ENDIF(NOT PETSC_FOUND)

INCLUDE_DIRECTORIES( ${PETSC_INCLUDE_DIR} .)
LINK_DIRECTORIES( ${PETSC_LINK_DIR} )

INCLUDE( ${SWIG_USE_FILE})
INCLUDE( ${ITK_USE_FILE})
INCLUDE( ${VTK_USE_FILE})

FIND_PACKAGE(PythonLibs)
INCLUDE_DIRECTORIES( ${PYTHON_INCLUDE_PATH})

#SET(CMAKE_SWIG_FLAGS "")
SET_SOURCE_FILES_PROPERTIES(laplace2.i
                PROPERTIES CPLUSPLUS ON)

SWIG_ADD_MODULE(Laplace python laplace2.i laplace2.cpp locator.cpp preprocessor.cpp solver.cpp tracer.cpp WrapperPolyData.cpp)
SWIG_LINK_LIBRARIES(Laplace ${PYTHON_LIBRARIES} vtkFiltering ITKCommon ITKSpatialObject ITKIO ${PETSC_LIBS} )

SET(CMAKE_CXX_FLAGS "")
