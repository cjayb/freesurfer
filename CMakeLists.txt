# ADD 
# #define _CRT_SECURE_NO_WARNINGS
# /wd n   - n is the number of warning to silence

project(freesurfer)
cmake_minimum_required (VERSION 2.6)
INCLUDE(freesurfer.cmake)

option (GRAPHIC_LIBS_DEFINED "Graphic Libraries" ON)
IF (GRAPHIC_LIBS_DEFINED)
option (GRAPHIC_APPS_DEFINED "Graphic Applications" ON)
option (QT_APPS_DEFINED "QT Applications" OFF)
ENDIF (GRAPHIC_LIBS_DEFINED)
option (FSGDF_DEFINED "FSGDF Apps" ON)
option (LABEL_DEFINED "Label Apps" ON)
option (DMRI_APPS_DEFINED "DMRI Apps" ON)
option (OPTSEQ_APPS_DEFINED "Optseq Apps" ON)
option (MRI_APPS_DEFINED "MRI Apps" ON)
option (MRIS_APPS_DEFINED "MRI Apps" ON)
option (FSLUTILS_APPS "FSL Utils" OFF)
option (MISC_APPS_DEFINED "Misc Apps" ON)
option (RARELY_USED "Not included in usual FS" OFF) 

#Core Libs
add_subdirectory(rgb)
add_subdirectory(image)
add_subdirectory(dicom)
add_subdirectory(unix)
add_subdirectory(hipsstubs)
add_subdirectory(log)
add_subdirectory(utilscpp)
add_subdirectory(utils)
add_subdirectory(svm-lib)

SET (FS_CORE utils rgb dicom hipsstubs log image unix utilscpp svm-lib)
SET (FS_LIBS ${FS_AUX_LIBS} ${FS_CORE})

#more libs
IF (GRAPHIC_LIBS_DEFINED)
add_subdirectory(qdecproject)
add_subdirectory(vtkfsio)
add_subdirectory(vtkutils)
add_subdirectory(itkio)
add_subdirectory(itkutils)
add_subdirectory(tetgen)
endif (GRAPHIC_LIBS_DEFINED)

IF (FSGDF_DEFINED)
add_subdirectory(fsgdf)
ENDIF (FSGDF_DEFINED)

IF (OPTSEQ_APPS_DEFINED)
add_subdirectory(optseq2)
add_subdirectory(stat_normalize)
ENDIF (OPTSEQ_APPS_DEFINED)

IF (DMRI_APPS_DEFINED)
add_subdirectory(dmri_poistats)
add_subdirectory(dmri_tensoreig)
ENDIF (DMRI_APPS_DEFINED)

IF (LABEL_DEFINED)
add_subdirectory(label_area)
add_subdirectory(label_create)
add_subdirectory(label_disjoint)
add_subdirectory(label_stats)
add_subdirectory(label_variance)
ENDIF (LABEL_DEFINED)

IF (MRI_APPS_DEFINED)
add_subdirectory(check_siemens_dir)
add_subdirectory(repair_siemens_file)
add_subdirectory(mkxsubjreg)
add_subdirectory(rbftest)
add_subdirectory(talairach_afd)
add_subdirectory(talairach_avi)
add_subdirectory(mri_add_xform_to_header)
add_subdirectory(mri_annotation2label)
add_subdirectory(mri_aparc2aseg)
add_subdirectory(mri_aparc2wmseg)
add_subdirectory(mri_apply_inu_correction)
add_subdirectory(mri_auto_fill)
add_subdirectory(mri_average)
add_subdirectory(mri_bc_sc_bias_correct)
add_subdirectory(mri_bias)
add_subdirectory(mri_binarize)
add_subdirectory(mri_build_priors)
add_subdirectory(mri_ca_label)
add_subdirectory(mri_ca_normalize)
add_subdirectory(mri_ca_register)
add_subdirectory(mri_ca_tissue_parms)
add_subdirectory(mri_ca_train)
add_subdirectory(mri_cc)
add_subdirectory(mri_cc_ma_fill)
add_subdirectory(mri_cc_medial_axis)
add_subdirectory(mri_cht2p)
add_subdirectory(mri_cnr)
add_subdirectory(mri_compute_overlap)
add_subdirectory(mri_compute_seg_overlap)
add_subdirectory(mri_concat)
add_subdirectory(mri_concatenate_lta)
add_subdirectory(mri_convert)
add_subdirectory(mri_convert_mdh)
add_subdirectory(mri_copy_values)
add_subdirectory(mri_cor2label)
add_subdirectory(mri_dct_align)
add_subdirectory(mri_deface)
add_subdirectory(mri_diff)
add_subdirectory(mri_distance_transform)
add_subdirectory(mri_edit_segmentation)
add_subdirectory(mri_edit_segmentation_with_surfaces)
add_subdirectory(mri_edit_wm_with_aseg)
add_subdirectory(mri_em_register)
add_subdirectory(mri_estimate_tissue_parms)
add_subdirectory(mri_evaluate_morph)
add_subdirectory(mri_extract)
add_subdirectory(mri_extract_conditions)
add_subdirectory(mri_extract_label)
add_subdirectory(mri_extract_largest_CC)
add_subdirectory(mri_extract_ma_intensity)
add_subdirectory(mri_fill)
add_subdirectory(mri_flip_lr)
add_subdirectory(mri_fslmat_to_lta)
add_subdirectory(mri_fwhm)
add_subdirectory(mri_gca_ambiguous)
add_subdirectory(mri_head)
add_subdirectory(mri_hires_register)
add_subdirectory(mri_histo_align)
add_subdirectory(mri_histo_eq)
add_subdirectory(mri_histogram)
add_subdirectory(mri_info)
add_subdirectory(mri_interpolate)
add_subdirectory(mri_jacobian)
add_subdirectory(mri_joint_density)
add_subdirectory(mri_label2label)
add_subdirectory(mri_label2vol)
add_subdirectory(mri_label2volume)
add_subdirectory(mri_label_accuracy)
add_subdirectory(mri_label_histo)
add_subdirectory(mri_label_vals)
add_subdirectory(mri_label_volume)
add_subdirectory(mri_linear_register)
add_subdirectory(mri_log_likelihood)
add_subdirectory(mri_make_bem_surfaces)
add_subdirectory(mri_make_density_map)
add_subdirectory(mri_make_register)
add_subdirectory(mri_make_template)
add_subdirectory(mri_map_atrophy)
add_subdirectory(mri_mark_temporal_lobe)
add_subdirectory(mri_mask)
add_subdirectory(mri_matrix_multiply)
add_subdirectory(mri_mc)
add_subdirectory(mri_mcsim)
add_subdirectory(mri_modify)
add_subdirectory(mri_morphology)
add_subdirectory(mri_ms_EM)
add_subdirectory(mri_ms_EM_with_atlas)
add_subdirectory(mri_ms_fitparms)
add_subdirectory(mri_ms_LDA)
add_subdirectory(mri_multispectral_segment)
add_subdirectory(mri_nlfilter)
add_subdirectory(mri_normalize)
add_subdirectory(mri_normalize_tp2)
add_subdirectory(mri_paint)
add_subdirectory(mri_parse_sdcmdir)
add_subdirectory(mri_parselabel)
add_subdirectory(mri_partial_ribbon)
add_subdirectory(mri_path2label)
add_subdirectory(mri_polv)
add_subdirectory(mri_probe_ima)
add_subdirectory(mri_reduce)
add_subdirectory(mri_register)
add_subdirectory(mri_relabel_hypointensities)
add_subdirectory(mri_remove_neck)
add_subdirectory(mri_ribbon)
add_subdirectory(mri_rigid_register)
add_subdirectory(mri_seghead)
add_subdirectory(mri_segment)
add_subdirectory(mri_segment_wm_damage)
add_subdirectory(mri_segstats)
add_subdirectory(mri_skullsurfaces)
add_subdirectory(mri_stats2seg)
add_subdirectory(mri_strip_nonwhite)
add_subdirectory(mri_strip_skull)
add_subdirectory(mri_strip_subject_info)
add_subdirectory(mri_subcorticalTopologyCorrection)
add_subdirectory(mri_surf2surf)
add_subdirectory(mri_surf2vol)
add_subdirectory(mri_surfacemask)
add_subdirectory(mri_surfcluster)
add_subdirectory(mri_swap_lr)
add_subdirectory(mri_synthesize)
add_subdirectory(mri_tessellate)
add_subdirectory(mri_threshold)
add_subdirectory(mri_topologycorrection)
add_subdirectory(mri_train)
add_subdirectory(mri_transform)
add_subdirectory(mri_transform_to_COR)
add_subdirectory(mri_twoclass)
add_subdirectory(mri_vol2roi)
add_subdirectory(mri_vol2surf)
add_subdirectory(mri_vol2vol)
add_subdirectory(mri_volcluster)
add_subdirectory(mri_voldiff)
add_subdirectory(mri_volsynth)
add_subdirectory(mri_watershed)
add_subdirectory(mri_wmfilter)
add_subdirectory(mri_xvolavg)
add_subdirectory(mri_z2p)
ENDIF (MRI_APPS_DEFINED)

IF (MRIS_APPS_DEFINED)
add_subdirectory(label2flat)
add_subdirectory(label2patch)
add_subdirectory(spherical_stats)
add_subdirectory(tridec)
IF (NOT WIN32)
add_subdirectory(stim) #No X on Win32
ENDIF (NOT WIN32)
add_subdirectory(stim_polar)
add_subdirectory(mrisp_paint)
add_subdirectory(mris_add_template)
add_subdirectory(mris_anatomical_stats)
add_subdirectory(mris_annot_to_segmentation)
add_subdirectory(mris_aseg_distance)
add_subdirectory(mris_average_curvature)
add_subdirectory(mris_average_parcellation)
add_subdirectory(mris_ca_deform)
add_subdirectory(mris_ca_label)
add_subdirectory(mris_ca_train)
add_subdirectory(mris_calc)
add_subdirectory(mris_classify_thickness)
add_subdirectory(mris_compute_acorr)
add_subdirectory(mris_compute_lgi)
add_subdirectory(mris_compute_optimal_kernel)
add_subdirectory(mris_compute_overlap)
add_subdirectory(mris_compute_parc_overlap)
add_subdirectory(mris_convert)
add_subdirectory(mris_curvature)
add_subdirectory(mris_curvature_stats)
add_subdirectory(mris_deform)
add_subdirectory(mris_density)
add_subdirectory(mris_diff)
add_subdirectory(mris_distance_map)
add_subdirectory(mris_distance_to_label)
add_subdirectory(mris_divide_parcellation)
add_subdirectory(mris_entropy)
add_subdirectory(mris_errors)
add_subdirectory(mris_euler_number)
add_subdirectory(mris_expand)
add_subdirectory(mris_fbirn_annot)
add_subdirectory(mris_fill)
add_subdirectory(mris_find_flat_regions)
add_subdirectory(mris_fix_topology)
add_subdirectory(mris_flatten)
add_subdirectory(mris_fwhm)
add_subdirectory(mris_inflate)
add_subdirectory(mris_info)
add_subdirectory(mris_jacobian)
add_subdirectory(mris_label2annot)
add_subdirectory(mris_label_area)
add_subdirectory(mris_label_mode)
add_subdirectory(mris_longitudinal_surfaces)
add_subdirectory(mris_make_average_surface)
add_subdirectory(mris_make_shapes)
add_subdirectory(mris_make_surfaces)
add_subdirectory(mris_make_template)
add_subdirectory(mris_morph_stats)
add_subdirectory(mris_ms_refine)
add_subdirectory(mris_ms_surface_CNR)
add_subdirectory(mris_multiscale_stats)
add_subdirectory(mris_niters2fwhm)
add_subdirectory(mris_pval_fill)
add_subdirectory(mris_register)
add_subdirectory(mris_remove_variance)
add_subdirectory(mris_rescale)
add_subdirectory(mris_reverse)
add_subdirectory(mris_rotate)
add_subdirectory(mris_sample_label)
add_subdirectory(mris_sample_parc)
add_subdirectory(mris_seg2annot)
add_subdirectory(mris_segment_vals)
add_subdirectory(mris_shrinkwrap)
add_subdirectory(mris_smooth)
add_subdirectory(mris_smooth_vals)
add_subdirectory(mris_sphere)
add_subdirectory(mris_spherical_average)
add_subdirectory(mris_surface_stats)
add_subdirectory(mris_surface_to_vol_distances)
add_subdirectory(mris_talairach)
add_subdirectory(mris_thickness)
add_subdirectory(mris_thickness_comparison)
add_subdirectory(mris_thickness_diff)
add_subdirectory(mris_topo_fixer)
add_subdirectory(mris_transform)
add_subdirectory(mris_translate_annotation)
add_subdirectory(mris_twoclass)
add_subdirectory(mris_volmask)
add_subdirectory(mris_volume)
add_subdirectory(mris_w_to_curv)
add_subdirectory(mris_writeobj)
ENDIF (MRIS_APPS_DEFINED)

IF (FSGDF_DEFINED)
add_subdirectory(mri_gdfglm)
add_subdirectory(mri_glmfit)
add_subdirectory(mris_glm)
ENDIF (FSGDF_DEFINED)

IF (FSLUTILS_APPS)
add_subdirectory(fslutils)
ENDIF (FSLUTILS_APPS)

IF (MISC_APPS_DEFINED)
add_subdirectory(histo_compute_joint_density)
add_subdirectory(histo_register_block)
add_subdirectory(dummy)
IF (NOT WIN32)
add_subdirectory(test_window_env)
ENDIF (NOT WIN32)
add_subdirectory(dngtester)
add_subdirectory(regdat2xfm)
add_subdirectory(scripts)
add_subdirectory(hiam_make_surfaces)
add_subdirectory(hiam_make_template)
add_subdirectory(hiam_register)
add_subdirectory(test_makevol)
add_subdirectory(matlab)
add_subdirectory(x86cpucaps)
add_subdirectory(fsfast)
add_subdirectory(mris_spherical_wavelets)
ENDIF (MISC_APPS_DEFINED)

IF (GRAPHIC_APPS_DEFINED)
IF (NOT WIN32)
add_subdirectory(mris2rgb)
add_subdirectory(nmovie)
add_subdirectory(tkmedit)
ENDIF (NOT WIN32)
add_subdirectory(tkregister2)
add_subdirectory(tksurfer)
add_subdirectory(mri_probedicom)
add_subdirectory(orient_mri)
add_subdirectory(qdec)
add_subdirectory(qdec_glmfit)
add_subdirectory(scuba)
add_subdirectory(scuba2)
add_subdirectory(vtkkwmedit-demo)
add_subdirectory(micro_stim)
add_subdirectory(mris_show)
ENDIF (GRAPHIC_APPS_DEFINED)

IF (QT_APPS_DEFINED)
add_subdirectory(plotter)
ENDIF (QT_APPS_DEFINED)

IF (RARELY_USED)
add_subdirectory(nlfilter)
add_subdirectory(diffdemo)
add_subdirectory(logz)
add_subdirectory(mapper)
add_subdirectory(segedit)
add_subdirectory(template)
add_subdirectory(mric_cluster)
add_subdirectory(mric_show)
add_subdirectory(mrisp_info)
add_subdirectory(meg_apply_inverse)
add_subdirectory(paint)
add_subdirectory(test)
add_subdirectory(tntest)
add_subdirectory(talairach_label)
add_subdirectory(stat_average)
add_subdirectory(stat_build_map_function)
add_subdirectory(stat_paint)
add_subdirectory(stat_w_average)
add_subdirectory(mris_spharm)
add_subdirectory(mri_find_seg_label)
ENDIF (RARELY_USED)



